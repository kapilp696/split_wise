<h1>Manage Members for <%= @group.name %></h1>
<h3>Add Members</h3>
<%= form_with url: add_members_group_path(@group), method: :post do %>
  <% @users.each do |user| %>
    <% if !(user.groups.include?(@group)) %>
      <div>
        <%= check_box_tag "user_ids[]", user.id, @group.users.include?(user) %>
        <%= label_tag user.email %>
      </div>
    <% end %>
  <% end %>
  <div class="actions">
    <%= submit_tag "Add Members" %>
  </div>
<% end %>

<h3>Current Members</h3>
<ul>
  <% @group.users.each do |user| %>
    <li>
      <%= user.email %>
      <%= link_to "Remove", remove_member_group_path(@group, user.id), data: {turbo_method: :delete, turbo_confirm: "Are you sure?" } %>
    </li>
  <% end %>
</ul>

<%= link_to 'Back', group_path(@group) %>
